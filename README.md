---

title: Help Center

navigation:

  - section: Help Center

  - document: overview_doc

    label: Overview

  - document: data_sources_doc

    label: Data Sources

  - document: data_definitions_doc

    label: Data Definitions

  - document: faq_doc

    label: FAQ

  - document: release_notes_doc

    label: Release Notes

---

# Sample Data Generator for AWS IoT Simple Beer Service

This is the code repository for sample code to locally generate IoT device data similar to what is generated by the [AWS Simple Beer Service](https://github.com/awslabs/simplebeerservice) devices, and feed it to AWS IoT service.

### Pre-requisites

* Amazon Web Services account
* [AWS Command Line Interface (CLI)](https://aws.amazon.com/cli/)
* Python
* boto3

### Script Details

The script generates random values (within a reasonable range) for each of the three parameters- Heart Rate, Oxygen Level, and Blood Pressure, with 20% chance of an abnormal reading appearing randomly (to signal an alert for the doctors). 

This script was originally taken from [aws-samples](https://github.com/aws-samples/sbs-iot-data-generator).

### Running Example

`$ python sbs.py` 

## Run the script on Amazon EC2 Instance

To run it from an Amazon EC2 instance. Follow these steps:

1. Create an IAM role with a policy that gives access to IoT (example: AWSIoTFullAccess)
2. Launch a new EC2 instance and assign it the IoT IAM role at launch
3. Login to the EC2 instance and change to root user `sudo su`
4. Set your default region and output format in `aws configure`
> Access Key ID: \<your access key> <br>
Secret Access Key: \<your secret access key> <br>
Default region: ap-southeast-1 <br>
Default output format: json
5. Upload `sbs.py` file to EC2, or `nano sbs.py`, copy the entire script, save and exit
6. ~~Make sure you have boto3 installed. If not, type `pip install boto3`~~
7. ~~Run `python sbs.py`~~
6. Check if you have pip with `pip --version`
7. Use pip to install Pipenv: `pip install --user pipenv`
8. Install boto3 package: `pipenv install boto3`
9. Run `sbs.py` from ec2: `pipenv run python sbs.py`

## Retrieve data using IoT Rules:

1. Go to AWS IoT Rules and create a new rule
2. Include rule query statement: `SELECT * FROM '/sbs/devicedata/#'`
> keep the topic filter (/sbs/devicedata/#') the same unless you change it in the sbs.py file
3. Select what you want to do with the data (action):
> E.g. Send a message to an SQS queue (but you will have to create the queue in advance)
